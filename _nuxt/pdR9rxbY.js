import{_ as S}from"./CFTlz3YN.js";import{A as D}from"./BDgLvZCc.js";import{u as R,a as j}from"./B3-n6PZE.js";import{c as I}from"./C90nouMY.js";import{_ as O,m as T,r as z,f as o,e as G,n as q,c,o as l,a as n,g as H,h as v,F as b,i as x,j as d,w as _,p as h,t as f,u as P,b as J,d as k}from"./DOUM3e2N.js";import"./BcsVgARc.js";const K={class:"tech-section"},Q={class:"tech-grid"},U={class:"tech-card"},W={key:0,class:"pagination-nav","aria-label":"文章分頁導覽"},X={class:"pagination-wrapper"},Y={class:"pagination-numbers"},Z={key:1,class:"pagination-ellipsis"},aa={key:2,class:"pagination-ellipsis"},ea={class:"pagination-info"},p=2,ta={__name:"[page]",async setup(sa){let g,y;const N=T(),A=z(null),m=I.articleListMaxLimit,a=o(()=>{const t=parseInt(N.params.page);return isNaN(t)||t<1?1:t}),E=o(()=>(a.value-1)*m),{data:r,error:w}=([g,y]=G(()=>R(`posts-page-${a.value}`,()=>j().getArticles(m,E.value))),g=await g,y(),g),e=o(()=>!r.value||!r.value.total?1:Math.ceil(r.value.total/m)),V=o(()=>!r.value||!r.value.items?[]:r.value.items.filter(t=>t&&typeof t=="object"&&t.id&&typeof t.id=="string"&&t.id.trim()&&t.title)),L=o(()=>{const t=[],i=Math.max(2,a.value-p),u=Math.min(e.value-1,a.value+p);for(let s=i;s<=u;s++)s!==1&&s!==e.value&&t.push(s);return t}),B=o(()=>a.value>p+1||e.value<=5),C=o(()=>a.value<e.value-p||e.value<=5),M=o(()=>a.value>p+2),$=o(()=>a.value<e.value-p-1);if(a.value>e.value&&e.value>0)throw q({statusCode:404,statusMessage:"頁面不存在"});if(w.value)throw new Error(w.value);return(t,i)=>{const u=S;return l(),c("section",K,[n("div",{ref_key:"container",ref:A,class:"tech-container"},[i[3]||(i[3]=H('<div class="tech-header" data-v-3a2ef5e7><h1 class="tech-title" data-v-3a2ef5e7><span class="tech-accent" data-v-3a2ef5e7>Blog</span> Articles </h1><div class="tech-divider" data-v-3a2ef5e7></div><p class="tech-subtitle" data-v-3a2ef5e7> 探索程式設計與技術領域的精選文章與心得分享 </p></div>',1)),n("div",Q,[(l(!0),c(b,null,x(V.value,(s,F)=>(l(),c("div",{key:s.id||F,class:"tech-card-wrapper"},[n("div",U,[J(P(D),{post:s},null,8,["post"])])]))),128))]),e.value>1?(l(),c("nav",W,[n("div",X,[a.value>1?(l(),d(u,{key:0,to:a.value===2?"/":`/page/${a.value-1}`,class:"pagination-link pagination-prev","aria-label":"上一頁"},{default:_(()=>i[0]||(i[0]=[n("i",{class:"fas fa-chevron-left"},null,-1),n("span",null,"上一頁",-1)])),_:1,__:[0]},8,["to"])):v("",!0),n("div",Y,[B.value?(l(),d(u,{key:0,to:"/",class:h(["pagination-number",{active:a.value===1}])},{default:_(()=>i[1]||(i[1]=[k(" 1 ")])),_:1,__:[1]},8,["class"])):v("",!0),M.value?(l(),c("span",Z,"...")):v("",!0),(l(!0),c(b,null,x(L.value,s=>(l(),d(u,{key:s,to:s===1?"/":`/page/${s}`,class:h(["pagination-number",{active:a.value===s}])},{default:_(()=>[k(f(s),1)]),_:2},1032,["to","class"]))),128)),$.value?(l(),c("span",aa,"...")):v("",!0),C.value?(l(),d(u,{key:3,to:`/page/${e.value}`,class:h(["pagination-number",{active:a.value===e.value}])},{default:_(()=>[k(f(e.value),1)]),_:1},8,["to","class"])):v("",!0)]),a.value<e.value?(l(),d(u,{key:1,to:`/page/${a.value+1}`,class:"pagination-link pagination-next","aria-label":"下一頁"},{default:_(()=>i[2]||(i[2]=[n("span",null,"下一頁",-1),n("i",{class:"fas fa-chevron-right"},null,-1)])),_:1,__:[2]},8,["to"])):v("",!0)]),n("div",ea," 第 "+f(a.value)+" 頁，共 "+f(e.value)+" 頁（總計 "+f(P(r).total)+" 篇文章） ",1)])):v("",!0)],512)])}}},ca=O(ta,[["__scopeId","data-v-3a2ef5e7"]]);export{ca as default};
